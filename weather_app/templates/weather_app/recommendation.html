<!--Extends the styling of the base template -->
{% extends 'weather_app/base_template.html' %}
{% load static %}


{% block head_content %}

  <!-- https://www.jajaldoang.com/post/cache-form-inputs-with-localstorage-in-javascript -->
  <!-- Caches form inputs, just put every field with oninput="cacheInput(this)" attributes -->
  <script>
      function cacheInput(e) {
          localStorage.setItem(e.attributes["name"].value, e.value)
      }

      window.onload = function () {
          let form = document.getElementById("recommendation");
          let inputs = form.getElementsByTagName('input');

          for (let i = 0; i < inputs.length; i++) {
              let el = inputs[i];
              if (el.tagName.toLowerCase() != "input" || el.attributes["type"].value != "text") {
                  continue
              }
              let cachedVal = localStorage.getItem(el.attributes["name"].value)
              if (cachedVal != null) {
                  el.value = cachedVal;
              }
              console.log(cachedVal)
          }
      }
  </script>

  <style>
    .clothe_placeholder {
      width: 250px;
      height: 250px;
      background-color: rgba(191, 191, 191, 255);
      color: rgba(0, 0, 0, 255);
    }

    .clothe_placeholder:hover {
      background-color: rgba(210, 210, 210, 255);
    }
  </style>

{% endblock %}

<!--All code goes in between the block and end content to override base template-->
{% block content %}
  
  <div class="container p-5 mt-4" style="box-shadow: 2px 2px 4px black;">
    <!-- <div class="row">
      <h1 class="p-3" style="text-align: center;">Our Official Weather Recommendations</h1>
    </div>
    
    <div class="row">
      
      <div class="col-4 offset-4 text-center">
        <button class="btn clothe_placeholder mt-3">
          Hats Placeholder
        </button>
      </div>
    </div>

    <div class="row">
      <div class="col-4 offset-4 text-center">
        <button class="btn clothe_placeholder mt-3">
          Shirts Placeholder
        </button>
      </div>
      
      <div class="col-4">
        <button class="btn clothe_placeholder mt-3">
          Offhand
        </button>        
      </div>
    </div>

    <div class="row">
      <div class="col-4 offset-4 text-center">
        <button class="btn clothe_placeholder mt-3">
          Pants Placeholder
        </button>
      </div>
    </div>

    <div class="row">
      <div class="col-4 offset-4 text-center">
        <button class="btn clothe_placeholder mt-3">
          Shoes Placeholder
        </button>        
      </div>
    </div> -->

    <div class="row">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Clothe Type</th>
            <th scope="col">Morning</th>
            <th scope="col">Afternoon</th>
            <th scope="col">Evening</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th scope="row">Headwear</th>
            <td>{{ outfit_morning.0 }}</td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <th scope="row">Shirts</th>
            <td>{{ outfit_morning.1 }}</td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <th scope="row">Pants</th>
            <td>{{ outfit_morning.2 }}</td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <th scope="row">Shoes</th>
            <td>{{ outfit_morning.3 }}</td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <form action="/recommendation" method="get" id="recommendation">
        <div class="row mt-5">
          <div class="col">
            <label for="working_offset" class="form_label">Enter your Working Offset (in degrees F): </label>
            <input id="working_offset" type="text" name="working_offset" placeholder="0" value="{{ context.working_offset }}" class="form-control" oninput="cacheInput(this)" required>
            <div class="invalid-feedback">
              Please a valid offset, 0 if none.
            </div>
          </div>
          <div class="col">
            <label for="tolerance_offset" class="form_label">Enter your Tolerance Offset (in degrees F): </label>
            <input id="tolerance_offset" type="text" name="tolerance_offset" placeholder="0" value="{{ context.tolerance_offset }}" class="form-control" oninput="cacheInput(this)" required>
            <div class="invalid-feedback">
              Please a valid offset, 0 if none.
            </div>
          </div>
          <input type="submit" value="OK" class="btn btn-primary mt-3">
        </div>
      </form>
  </div>
  
{% endblock %}